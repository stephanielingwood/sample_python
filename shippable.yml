language: python

python:
  - 2.7

env:
  global:
    - TEST_VAR=reallyAwesomeString

install:
  - pip install -r requirements.txt

build:
  ci:  
    # - mkdir -p shippable/testresults
    # - mkdir -p shippable/codecoverage
    - cd shippable/codecoverage/nonexistantdir
    - nosetests test.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml
    - which python && coverage run --branch test.py
    - which python && coverage xml -o shippable/codecoverage/coverage.xml test.py

integrations:
    notifications:
        - integrationName: stephSlack
          type: slack
          recipients:
            # - "#testissues"
            - "@stephanielingwood"
          branches:
              only:
                - notifications
          on_start: always
          on_success: never
          on_failure: always
        # - integrationName: slackTestInterns
        #   type: slack
        #   recipients:
        #     - "#test_interns"
        #   branches:
        #       only:
        #         - notifications
        #   on_success: always
        #   on_failure: always
        - integrationName: irc
          type: irc
          recipients:
            - "chat.freenode.net#test-irc"
            # - "chat.freenode.net#eddyline1"
          branches:
            only:
                - notifications
          on_success: always
          on_failure: always
        - integrationName: email
          type: email
          recipients:
            - stephanie@shippable.com
            # - stephanieshiptesting@gmail.com
          branches:
            only:
                - notifications
          on_success: always
          on_failure: always
